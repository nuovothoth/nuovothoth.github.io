"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _styledBase = _interopRequireDefault(require("@emotion/styled-base"));

var _debounce2 = _interopRequireDefault(require("lodash/debounce"));

var _isEmpty2 = _interopRequireDefault(require("lodash/isEmpty"));

var _get2 = _interopRequireDefault(require("lodash/get"));

var _react = _interopRequireDefault(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _reactImmutableProptypes = _interopRequireDefault(require("react-immutable-proptypes"));

var _immutable = require("immutable");

var _core = require("@emotion/core");

var _slate = require("slate");

var _slateReact = require("slate-react");

var _netlifyCmsUiDefault = require("netlify-cms-ui-default");

var _styles = require("../styles");

var _serializers = require("../serializers");

var _Toolbar = _interopRequireDefault(require("../MarkdownControl/Toolbar"));

var _renderers = require("./renderers");

var _visual = _interopRequireDefault(require("./plugins/visual"));

var _schema = _interopRequireDefault(require("./schema"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _templateObject2() {
  const data = _taggedTemplateLiteral(["\n                  padding: 16px 20px 0;\n                "]);

  _templateObject2 = function _templateObject2() {
    return data;
  };

  return data;
}

function _templateObject() {
  const data = _taggedTemplateLiteral(["\n                  ", "\n                "]);

  _templateObject = function _templateObject() {
    return data;
  };

  return data;
}

function _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _EMOTION_STRINGIFIED_CSS_ERROR__() { return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }

const visualEditorStyles = "\n  position: relative;\n  overflow: hidden;\n  overflow-x: auto;\n  font-family: ".concat(_netlifyCmsUiDefault.fonts.primary, ";\n  min-height: ").concat(_netlifyCmsUiDefault.lengths.richTextEditorMinHeight, ";\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  border-top: 0;\n  margin-top: -").concat(_styles.editorStyleVars.stickyDistanceBottom, ";\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n");
const InsertionPoint = (0, _styledBase.default)("div", {
  target: "evezps90",
  label: "InsertionPoint"
})(process.env.NODE_ENV === "production" ? {
  name: "b2d31m",
  styles: "flex:1 1 auto;cursor:text;"
} : {
  name: "b2d31m",
  styles: "flex:1 1 auto;cursor:text;",
  map: "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9NYXJrZG93bkNvbnRyb2wvVmlzdWFsRWRpdG9yLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWdDaUMiLCJmaWxlIjoiLi4vLi4vLi4vc3JjL01hcmtkb3duQ29udHJvbC9WaXN1YWxFZGl0b3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBJbW11dGFibGVQcm9wVHlwZXMgZnJvbSAncmVhY3QtaW1tdXRhYmxlLXByb3B0eXBlcyc7XG5pbXBvcnQgeyBmcm9tSlMgfSBmcm9tICdpbW11dGFibGUnO1xuaW1wb3J0IHN0eWxlZCBmcm9tICdAZW1vdGlvbi9zdHlsZWQnO1xuaW1wb3J0IHsgY3NzIGFzIGNvcmVDc3MsIENsYXNzTmFtZXMgfSBmcm9tICdAZW1vdGlvbi9jb3JlJztcbmltcG9ydCB7IGdldCwgaXNFbXB0eSwgZGVib3VuY2UgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgVmFsdWUsIERvY3VtZW50LCBCbG9jaywgVGV4dCB9IGZyb20gJ3NsYXRlJztcbmltcG9ydCB7IEVkaXRvciBhcyBTbGF0ZSB9IGZyb20gJ3NsYXRlLXJlYWN0JztcbmltcG9ydCB7IGxlbmd0aHMsIGZvbnRzIH0gZnJvbSAnbmV0bGlmeS1jbXMtdWktZGVmYXVsdCc7XG5pbXBvcnQgeyBlZGl0b3JTdHlsZVZhcnMsIEVkaXRvckNvbnRyb2xCYXIgfSBmcm9tICcuLi9zdHlsZXMnO1xuaW1wb3J0IHsgc2xhdGVUb01hcmtkb3duLCBtYXJrZG93blRvU2xhdGUgfSBmcm9tICcuLi9zZXJpYWxpemVycyc7XG5pbXBvcnQgVG9vbGJhciBmcm9tICcuLi9NYXJrZG93bkNvbnRyb2wvVG9vbGJhcic7XG5pbXBvcnQgeyByZW5kZXJCbG9jaywgcmVuZGVySW5saW5lLCByZW5kZXJNYXJrIH0gZnJvbSAnLi9yZW5kZXJlcnMnO1xuaW1wb3J0IHBsdWdpbnMgZnJvbSAnLi9wbHVnaW5zL3Zpc3VhbCc7XG5pbXBvcnQgc2NoZW1hIGZyb20gJy4vc2NoZW1hJztcblxuY29uc3QgdmlzdWFsRWRpdG9yU3R5bGVzID0gYFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIG92ZXJmbG93LXg6IGF1dG87XG4gIGZvbnQtZmFtaWx5OiAke2ZvbnRzLnByaW1hcnl9O1xuICBtaW4taGVpZ2h0OiAke2xlbmd0aHMucmljaFRleHRFZGl0b3JNaW5IZWlnaHR9O1xuICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAwO1xuICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMDtcbiAgYm9yZGVyLXRvcDogMDtcbiAgbWFyZ2luLXRvcDogLSR7ZWRpdG9yU3R5bGVWYXJzLnN0aWNreURpc3RhbmNlQm90dG9tfTtcbiAgcGFkZGluZzogMDtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbmA7XG5cbmNvbnN0IEluc2VydGlvblBvaW50ID0gc3R5bGVkLmRpdmBcbiAgZmxleDogMSAxIGF1dG87XG4gIGN1cnNvcjogdGV4dDtcbmA7XG5cbmNvbnN0IGNyZWF0ZUVtcHR5UmF3RG9jID0gKCkgPT4ge1xuICBjb25zdCBlbXB0eVRleHQgPSBUZXh0LmNyZWF0ZSgnJyk7XG4gIGNvbnN0IGVtcHR5QmxvY2sgPSBCbG9jay5jcmVhdGUoeyBvYmplY3Q6ICdibG9jaycsIHR5cGU6ICdwYXJhZ3JhcGgnLCBub2RlczogW2VtcHR5VGV4dF0gfSk7XG4gIHJldHVybiB7IG5vZGVzOiBbZW1wdHlCbG9ja10gfTtcbn07XG5cbmNvbnN0IGNyZWF0ZVNsYXRlVmFsdWUgPSAocmF3VmFsdWUsIHsgdm9pZENvZGVCbG9jayB9KSA9PiB7XG4gIGNvbnN0IHJhd0RvYyA9IHJhd1ZhbHVlICYmIG1hcmtkb3duVG9TbGF0ZShyYXdWYWx1ZSwgeyB2b2lkQ29kZUJsb2NrIH0pO1xuICBjb25zdCByYXdEb2NIYXNOb2RlcyA9ICFpc0VtcHR5KGdldChyYXdEb2MsICdub2RlcycpKTtcbiAgY29uc3QgZG9jdW1lbnQgPSBEb2N1bWVudC5mcm9tSlNPTihyYXdEb2NIYXNOb2RlcyA/IHJhd0RvYyA6IGNyZWF0ZUVtcHR5UmF3RG9jKCkpO1xuICByZXR1cm4gVmFsdWUuY3JlYXRlKHsgZG9jdW1lbnQgfSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFZGl0b3IgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICBjb25zdCBlZGl0b3JDb21wb25lbnRzID0gcHJvcHMuZ2V0RWRpdG9yQ29tcG9uZW50cygpO1xuICAgIHRoaXMuc2hvcnRjb2RlQ29tcG9uZW50cyA9IGVkaXRvckNvbXBvbmVudHMuZmlsdGVyKCh7IHR5cGUgfSkgPT4gdHlwZSA9PT0gJ3Nob3J0Y29kZScpO1xuICAgIHRoaXMuY29kZUJsb2NrQ29tcG9uZW50ID0gZnJvbUpTKGVkaXRvckNvbXBvbmVudHMuZmluZCgoeyB0eXBlIH0pID0+IHR5cGUgPT09ICdjb2RlLWJsb2NrJykpO1xuICAgIHRoaXMuZWRpdG9yQ29tcG9uZW50cyA9XG4gICAgICB0aGlzLmNvZGVCbG9ja0NvbXBvbmVudCB8fCBlZGl0b3JDb21wb25lbnRzLmhhcygnY29kZS1ibG9jaycpXG4gICAgICAgID8gZWRpdG9yQ29tcG9uZW50c1xuICAgICAgICA6IGVkaXRvckNvbXBvbmVudHMuc2V0KCdjb2RlLWJsb2NrJywgeyBsYWJlbDogJ0NvZGUgQmxvY2snLCB0eXBlOiAnY29kZS1ibG9jaycgfSk7XG4gICAgdGhpcy5yZW5kZXJCbG9jayA9IHJlbmRlckJsb2NrKHtcbiAgICAgIGNsYXNzTmFtZVdyYXBwZXI6IHByb3BzLmNsYXNzTmFtZSxcbiAgICAgIHJlc29sdmVXaWRnZXQ6IHByb3BzLnJlc29sdmVXaWRnZXQsXG4gICAgICBjb2RlQmxvY2tDb21wb25lbnQ6IHRoaXMuY29kZUJsb2NrQ29tcG9uZW50LFxuICAgIH0pO1xuICAgIHRoaXMucmVuZGVySW5saW5lID0gcmVuZGVySW5saW5lKCk7XG4gICAgdGhpcy5yZW5kZXJNYXJrID0gcmVuZGVyTWFyaygpO1xuICAgIHRoaXMuc2NoZW1hID0gc2NoZW1hKHsgdm9pZENvZGVCbG9jazogISF0aGlzLmNvZGVCbG9ja0NvbXBvbmVudCB9KTtcbiAgICB0aGlzLnBsdWdpbnMgPSBwbHVnaW5zKHsgZ2V0QXNzZXQ6IHByb3BzLmdldEFzc2V0LCByZXNvbHZlV2lkZ2V0OiBwcm9wcy5yZXNvbHZlV2lkZ2V0IH0pO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICB2YWx1ZTogY3JlYXRlU2xhdGVWYWx1ZSh0aGlzLnByb3BzLnZhbHVlLCB7IHZvaWRDb2RlQmxvY2s6ICEhdGhpcy5jb2RlQmxvY2tDb21wb25lbnQgfSksXG4gICAgfTtcbiAgfVxuXG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgb25BZGRBc3NldDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBnZXRBc3NldDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBvbkNoYW5nZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBvbk1vZGU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgdmFsdWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgZmllbGQ6IEltbXV0YWJsZVByb3BUeXBlcy5tYXAuaXNSZXF1aXJlZCxcbiAgICBnZXRFZGl0b3JDb21wb25lbnRzOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICB9O1xuXG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICAgIHJldHVybiAhdGhpcy5zdGF0ZS52YWx1ZS5lcXVhbHMobmV4dFN0YXRlLnZhbHVlKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGlmICh0aGlzLnByb3BzLnBlbmRpbmdGb2N1cykge1xuICAgICAgdGhpcy5lZGl0b3IuZm9jdXMoKTtcbiAgICAgIHRoaXMucHJvcHMucGVuZGluZ0ZvY3VzKCk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlTWFya0NsaWNrID0gdHlwZSA9PiB7XG4gICAgdGhpcy5lZGl0b3IudG9nZ2xlTWFyayh0eXBlKS5mb2N1cygpO1xuICB9O1xuXG4gIGhhbmRsZUJsb2NrQ2xpY2sgPSB0eXBlID0+IHtcbiAgICB0aGlzLmVkaXRvci50b2dnbGVCbG9jayh0eXBlKS5mb2N1cygpO1xuICB9O1xuXG4gIGhhbmRsZUxpbmtDbGljayA9ICgpID0+IHtcbiAgICB0aGlzLmVkaXRvci50b2dnbGVMaW5rKCgpID0+IHdpbmRvdy5wcm9tcHQoJ0VudGVyIHRoZSBVUkwgb2YgdGhlIGxpbmsnKSk7XG4gIH07XG5cbiAgaGFzTWFyayA9IHR5cGUgPT4gdGhpcy5lZGl0b3IgJiYgdGhpcy5lZGl0b3IuaGFzTWFyayh0eXBlKTtcbiAgaGFzSW5saW5lID0gdHlwZSA9PiB0aGlzLmVkaXRvciAmJiB0aGlzLmVkaXRvci5oYXNJbmxpbmUodHlwZSk7XG4gIGhhc0Jsb2NrID0gdHlwZSA9PiB0aGlzLmVkaXRvciAmJiB0aGlzLmVkaXRvci5oYXNCbG9jayh0eXBlKTtcblxuICBoYW5kbGVUb2dnbGVNb2RlID0gKCkgPT4ge1xuICAgIHRoaXMucHJvcHMub25Nb2RlKCdyYXcnKTtcbiAgfTtcblxuICBoYW5kbGVJbnNlcnRTaG9ydGNvZGUgPSBwbHVnaW5Db25maWcgPT4ge1xuICAgIHRoaXMuZWRpdG9yLmluc2VydFNob3J0Y29kZShwbHVnaW5Db25maWcpO1xuICB9O1xuXG4gIGhhbmRsZUNsaWNrQmVsb3dEb2N1bWVudCA9ICgpID0+IHtcbiAgICB0aGlzLmVkaXRvci5tb3ZlVG9FbmRPZkRvY3VtZW50KCk7XG4gIH07XG5cbiAgaGFuZGxlRG9jdW1lbnRDaGFuZ2UgPSBkZWJvdW5jZShlZGl0b3IgPT4ge1xuICAgIGNvbnN0IHsgb25DaGFuZ2UgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgcmF3ID0gZWRpdG9yLnZhbHVlLmRvY3VtZW50LnRvSlMoKTtcbiAgICBjb25zdCBtYXJrZG93biA9IHNsYXRlVG9NYXJrZG93bihyYXcsIHsgdm9pZENvZGVCbG9jazogdGhpcy5jb2RlQmxvY2tDb21wb25lbnQgfSk7XG4gICAgb25DaGFuZ2UobWFya2Rvd24pO1xuICB9LCAxNTApO1xuXG4gIGhhbmRsZUNoYW5nZSA9IGVkaXRvciA9PiB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLnZhbHVlLmRvY3VtZW50LmVxdWFscyhlZGl0b3IudmFsdWUuZG9jdW1lbnQpKSB7XG4gICAgICB0aGlzLmhhbmRsZURvY3VtZW50Q2hhbmdlKGVkaXRvcik7XG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoeyB2YWx1ZTogZWRpdG9yLnZhbHVlIH0pO1xuICB9O1xuXG4gIHByb2Nlc3NSZWYgPSByZWYgPT4ge1xuICAgIHRoaXMuZWRpdG9yID0gcmVmO1xuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IG9uQWRkQXNzZXQsIGdldEFzc2V0LCBjbGFzc05hbWUsIGZpZWxkIH0gPSB0aGlzLnByb3BzO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIGNzcz17Y29yZUNzc2BcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIGB9XG4gICAgICA+XG4gICAgICAgIDxFZGl0b3JDb250cm9sQmFyPlxuICAgICAgICAgIDxUb29sYmFyXG4gICAgICAgICAgICBvbk1hcmtDbGljaz17dGhpcy5oYW5kbGVNYXJrQ2xpY2t9XG4gICAgICAgICAgICBvbkJsb2NrQ2xpY2s9e3RoaXMuaGFuZGxlQmxvY2tDbGlja31cbiAgICAgICAgICAgIG9uTGlua0NsaWNrPXt0aGlzLmhhbmRsZUxpbmtDbGlja31cbiAgICAgICAgICAgIG9uVG9nZ2xlTW9kZT17dGhpcy5oYW5kbGVUb2dnbGVNb2RlfVxuICAgICAgICAgICAgcGx1Z2lucz17dGhpcy5lZGl0b3JDb21wb25lbnRzfVxuICAgICAgICAgICAgb25TdWJtaXQ9e3RoaXMuaGFuZGxlSW5zZXJ0U2hvcnRjb2RlfVxuICAgICAgICAgICAgb25BZGRBc3NldD17b25BZGRBc3NldH1cbiAgICAgICAgICAgIGdldEFzc2V0PXtnZXRBc3NldH1cbiAgICAgICAgICAgIGJ1dHRvbnM9e2ZpZWxkLmdldCgnYnV0dG9ucycpfVxuICAgICAgICAgICAgaGFzTWFyaz17dGhpcy5oYXNNYXJrfVxuICAgICAgICAgICAgaGFzSW5saW5lPXt0aGlzLmhhc0lubGluZX1cbiAgICAgICAgICAgIGhhc0Jsb2NrPXt0aGlzLmhhc0Jsb2NrfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvRWRpdG9yQ29udHJvbEJhcj5cbiAgICAgICAgPENsYXNzTmFtZXM+XG4gICAgICAgICAgeyh7IGNzcywgY3ggfSkgPT4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICBjc3NgXG4gICAgICAgICAgICAgICAgICAke3Zpc3VhbEVkaXRvclN0eWxlc31cbiAgICAgICAgICAgICAgICBgLFxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8U2xhdGVcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDE2cHggMjBweCAwO1xuICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudmFsdWV9XG4gICAgICAgICAgICAgICAgcmVuZGVyQmxvY2s9e3RoaXMucmVuZGVyQmxvY2t9XG4gICAgICAgICAgICAgICAgcmVuZGVySW5saW5lPXt0aGlzLnJlbmRlcklubGluZX1cbiAgICAgICAgICAgICAgICByZW5kZXJNYXJrPXt0aGlzLnJlbmRlck1hcmt9XG4gICAgICAgICAgICAgICAgc2NoZW1hPXt0aGlzLnNjaGVtYX1cbiAgICAgICAgICAgICAgICBwbHVnaW5zPXt0aGlzLnBsdWdpbnN9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgICAgIHJlZj17dGhpcy5wcm9jZXNzUmVmfVxuICAgICAgICAgICAgICAgIHNwZWxsQ2hlY2tcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEluc2VydGlvblBvaW50IG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2tCZWxvd0RvY3VtZW50fSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9DbGFzc05hbWVzPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuIl19 */",
  toString: _EMOTION_STRINGIFIED_CSS_ERROR__
});

const createEmptyRawDoc = () => {
  const emptyText = _slate.Text.create('');

  const emptyBlock = _slate.Block.create({
    object: 'block',
    type: 'paragraph',
    nodes: [emptyText]
  });

  return {
    nodes: [emptyBlock]
  };
};

const createSlateValue = (rawValue, _ref2) => {
  let {
    voidCodeBlock
  } = _ref2;
  const rawDoc = rawValue && (0, _serializers.markdownToSlate)(rawValue, {
    voidCodeBlock
  });
  const rawDocHasNodes = !(0, _isEmpty2.default)((0, _get2.default)(rawDoc, 'nodes'));

  const document = _slate.Document.fromJSON(rawDocHasNodes ? rawDoc : createEmptyRawDoc());

  return _slate.Value.create({
    document
  });
};

var _ref = process.env.NODE_ENV === "production" ? {
  name: "t5h4ts-Editor",
  styles: "position:relative;;label:Editor;"
} : {
  name: "t5h4ts-Editor",
  styles: "position:relative;;label:Editor;",
  map: "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9NYXJrZG93bkNvbnRyb2wvVmlzdWFsRWRpdG9yLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWtKb0IiLCJmaWxlIjoiLi4vLi4vLi4vc3JjL01hcmtkb3duQ29udHJvbC9WaXN1YWxFZGl0b3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBJbW11dGFibGVQcm9wVHlwZXMgZnJvbSAncmVhY3QtaW1tdXRhYmxlLXByb3B0eXBlcyc7XG5pbXBvcnQgeyBmcm9tSlMgfSBmcm9tICdpbW11dGFibGUnO1xuaW1wb3J0IHN0eWxlZCBmcm9tICdAZW1vdGlvbi9zdHlsZWQnO1xuaW1wb3J0IHsgY3NzIGFzIGNvcmVDc3MsIENsYXNzTmFtZXMgfSBmcm9tICdAZW1vdGlvbi9jb3JlJztcbmltcG9ydCB7IGdldCwgaXNFbXB0eSwgZGVib3VuY2UgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgVmFsdWUsIERvY3VtZW50LCBCbG9jaywgVGV4dCB9IGZyb20gJ3NsYXRlJztcbmltcG9ydCB7IEVkaXRvciBhcyBTbGF0ZSB9IGZyb20gJ3NsYXRlLXJlYWN0JztcbmltcG9ydCB7IGxlbmd0aHMsIGZvbnRzIH0gZnJvbSAnbmV0bGlmeS1jbXMtdWktZGVmYXVsdCc7XG5pbXBvcnQgeyBlZGl0b3JTdHlsZVZhcnMsIEVkaXRvckNvbnRyb2xCYXIgfSBmcm9tICcuLi9zdHlsZXMnO1xuaW1wb3J0IHsgc2xhdGVUb01hcmtkb3duLCBtYXJrZG93blRvU2xhdGUgfSBmcm9tICcuLi9zZXJpYWxpemVycyc7XG5pbXBvcnQgVG9vbGJhciBmcm9tICcuLi9NYXJrZG93bkNvbnRyb2wvVG9vbGJhcic7XG5pbXBvcnQgeyByZW5kZXJCbG9jaywgcmVuZGVySW5saW5lLCByZW5kZXJNYXJrIH0gZnJvbSAnLi9yZW5kZXJlcnMnO1xuaW1wb3J0IHBsdWdpbnMgZnJvbSAnLi9wbHVnaW5zL3Zpc3VhbCc7XG5pbXBvcnQgc2NoZW1hIGZyb20gJy4vc2NoZW1hJztcblxuY29uc3QgdmlzdWFsRWRpdG9yU3R5bGVzID0gYFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIG92ZXJmbG93LXg6IGF1dG87XG4gIGZvbnQtZmFtaWx5OiAke2ZvbnRzLnByaW1hcnl9O1xuICBtaW4taGVpZ2h0OiAke2xlbmd0aHMucmljaFRleHRFZGl0b3JNaW5IZWlnaHR9O1xuICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAwO1xuICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMDtcbiAgYm9yZGVyLXRvcDogMDtcbiAgbWFyZ2luLXRvcDogLSR7ZWRpdG9yU3R5bGVWYXJzLnN0aWNreURpc3RhbmNlQm90dG9tfTtcbiAgcGFkZGluZzogMDtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbmA7XG5cbmNvbnN0IEluc2VydGlvblBvaW50ID0gc3R5bGVkLmRpdmBcbiAgZmxleDogMSAxIGF1dG87XG4gIGN1cnNvcjogdGV4dDtcbmA7XG5cbmNvbnN0IGNyZWF0ZUVtcHR5UmF3RG9jID0gKCkgPT4ge1xuICBjb25zdCBlbXB0eVRleHQgPSBUZXh0LmNyZWF0ZSgnJyk7XG4gIGNvbnN0IGVtcHR5QmxvY2sgPSBCbG9jay5jcmVhdGUoeyBvYmplY3Q6ICdibG9jaycsIHR5cGU6ICdwYXJhZ3JhcGgnLCBub2RlczogW2VtcHR5VGV4dF0gfSk7XG4gIHJldHVybiB7IG5vZGVzOiBbZW1wdHlCbG9ja10gfTtcbn07XG5cbmNvbnN0IGNyZWF0ZVNsYXRlVmFsdWUgPSAocmF3VmFsdWUsIHsgdm9pZENvZGVCbG9jayB9KSA9PiB7XG4gIGNvbnN0IHJhd0RvYyA9IHJhd1ZhbHVlICYmIG1hcmtkb3duVG9TbGF0ZShyYXdWYWx1ZSwgeyB2b2lkQ29kZUJsb2NrIH0pO1xuICBjb25zdCByYXdEb2NIYXNOb2RlcyA9ICFpc0VtcHR5KGdldChyYXdEb2MsICdub2RlcycpKTtcbiAgY29uc3QgZG9jdW1lbnQgPSBEb2N1bWVudC5mcm9tSlNPTihyYXdEb2NIYXNOb2RlcyA/IHJhd0RvYyA6IGNyZWF0ZUVtcHR5UmF3RG9jKCkpO1xuICByZXR1cm4gVmFsdWUuY3JlYXRlKHsgZG9jdW1lbnQgfSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFZGl0b3IgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICBjb25zdCBlZGl0b3JDb21wb25lbnRzID0gcHJvcHMuZ2V0RWRpdG9yQ29tcG9uZW50cygpO1xuICAgIHRoaXMuc2hvcnRjb2RlQ29tcG9uZW50cyA9IGVkaXRvckNvbXBvbmVudHMuZmlsdGVyKCh7IHR5cGUgfSkgPT4gdHlwZSA9PT0gJ3Nob3J0Y29kZScpO1xuICAgIHRoaXMuY29kZUJsb2NrQ29tcG9uZW50ID0gZnJvbUpTKGVkaXRvckNvbXBvbmVudHMuZmluZCgoeyB0eXBlIH0pID0+IHR5cGUgPT09ICdjb2RlLWJsb2NrJykpO1xuICAgIHRoaXMuZWRpdG9yQ29tcG9uZW50cyA9XG4gICAgICB0aGlzLmNvZGVCbG9ja0NvbXBvbmVudCB8fCBlZGl0b3JDb21wb25lbnRzLmhhcygnY29kZS1ibG9jaycpXG4gICAgICAgID8gZWRpdG9yQ29tcG9uZW50c1xuICAgICAgICA6IGVkaXRvckNvbXBvbmVudHMuc2V0KCdjb2RlLWJsb2NrJywgeyBsYWJlbDogJ0NvZGUgQmxvY2snLCB0eXBlOiAnY29kZS1ibG9jaycgfSk7XG4gICAgdGhpcy5yZW5kZXJCbG9jayA9IHJlbmRlckJsb2NrKHtcbiAgICAgIGNsYXNzTmFtZVdyYXBwZXI6IHByb3BzLmNsYXNzTmFtZSxcbiAgICAgIHJlc29sdmVXaWRnZXQ6IHByb3BzLnJlc29sdmVXaWRnZXQsXG4gICAgICBjb2RlQmxvY2tDb21wb25lbnQ6IHRoaXMuY29kZUJsb2NrQ29tcG9uZW50LFxuICAgIH0pO1xuICAgIHRoaXMucmVuZGVySW5saW5lID0gcmVuZGVySW5saW5lKCk7XG4gICAgdGhpcy5yZW5kZXJNYXJrID0gcmVuZGVyTWFyaygpO1xuICAgIHRoaXMuc2NoZW1hID0gc2NoZW1hKHsgdm9pZENvZGVCbG9jazogISF0aGlzLmNvZGVCbG9ja0NvbXBvbmVudCB9KTtcbiAgICB0aGlzLnBsdWdpbnMgPSBwbHVnaW5zKHsgZ2V0QXNzZXQ6IHByb3BzLmdldEFzc2V0LCByZXNvbHZlV2lkZ2V0OiBwcm9wcy5yZXNvbHZlV2lkZ2V0IH0pO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICB2YWx1ZTogY3JlYXRlU2xhdGVWYWx1ZSh0aGlzLnByb3BzLnZhbHVlLCB7IHZvaWRDb2RlQmxvY2s6ICEhdGhpcy5jb2RlQmxvY2tDb21wb25lbnQgfSksXG4gICAgfTtcbiAgfVxuXG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgb25BZGRBc3NldDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBnZXRBc3NldDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBvbkNoYW5nZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBvbk1vZGU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgdmFsdWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgZmllbGQ6IEltbXV0YWJsZVByb3BUeXBlcy5tYXAuaXNSZXF1aXJlZCxcbiAgICBnZXRFZGl0b3JDb21wb25lbnRzOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICB9O1xuXG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICAgIHJldHVybiAhdGhpcy5zdGF0ZS52YWx1ZS5lcXVhbHMobmV4dFN0YXRlLnZhbHVlKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGlmICh0aGlzLnByb3BzLnBlbmRpbmdGb2N1cykge1xuICAgICAgdGhpcy5lZGl0b3IuZm9jdXMoKTtcbiAgICAgIHRoaXMucHJvcHMucGVuZGluZ0ZvY3VzKCk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlTWFya0NsaWNrID0gdHlwZSA9PiB7XG4gICAgdGhpcy5lZGl0b3IudG9nZ2xlTWFyayh0eXBlKS5mb2N1cygpO1xuICB9O1xuXG4gIGhhbmRsZUJsb2NrQ2xpY2sgPSB0eXBlID0+IHtcbiAgICB0aGlzLmVkaXRvci50b2dnbGVCbG9jayh0eXBlKS5mb2N1cygpO1xuICB9O1xuXG4gIGhhbmRsZUxpbmtDbGljayA9ICgpID0+IHtcbiAgICB0aGlzLmVkaXRvci50b2dnbGVMaW5rKCgpID0+IHdpbmRvdy5wcm9tcHQoJ0VudGVyIHRoZSBVUkwgb2YgdGhlIGxpbmsnKSk7XG4gIH07XG5cbiAgaGFzTWFyayA9IHR5cGUgPT4gdGhpcy5lZGl0b3IgJiYgdGhpcy5lZGl0b3IuaGFzTWFyayh0eXBlKTtcbiAgaGFzSW5saW5lID0gdHlwZSA9PiB0aGlzLmVkaXRvciAmJiB0aGlzLmVkaXRvci5oYXNJbmxpbmUodHlwZSk7XG4gIGhhc0Jsb2NrID0gdHlwZSA9PiB0aGlzLmVkaXRvciAmJiB0aGlzLmVkaXRvci5oYXNCbG9jayh0eXBlKTtcblxuICBoYW5kbGVUb2dnbGVNb2RlID0gKCkgPT4ge1xuICAgIHRoaXMucHJvcHMub25Nb2RlKCdyYXcnKTtcbiAgfTtcblxuICBoYW5kbGVJbnNlcnRTaG9ydGNvZGUgPSBwbHVnaW5Db25maWcgPT4ge1xuICAgIHRoaXMuZWRpdG9yLmluc2VydFNob3J0Y29kZShwbHVnaW5Db25maWcpO1xuICB9O1xuXG4gIGhhbmRsZUNsaWNrQmVsb3dEb2N1bWVudCA9ICgpID0+IHtcbiAgICB0aGlzLmVkaXRvci5tb3ZlVG9FbmRPZkRvY3VtZW50KCk7XG4gIH07XG5cbiAgaGFuZGxlRG9jdW1lbnRDaGFuZ2UgPSBkZWJvdW5jZShlZGl0b3IgPT4ge1xuICAgIGNvbnN0IHsgb25DaGFuZ2UgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgcmF3ID0gZWRpdG9yLnZhbHVlLmRvY3VtZW50LnRvSlMoKTtcbiAgICBjb25zdCBtYXJrZG93biA9IHNsYXRlVG9NYXJrZG93bihyYXcsIHsgdm9pZENvZGVCbG9jazogdGhpcy5jb2RlQmxvY2tDb21wb25lbnQgfSk7XG4gICAgb25DaGFuZ2UobWFya2Rvd24pO1xuICB9LCAxNTApO1xuXG4gIGhhbmRsZUNoYW5nZSA9IGVkaXRvciA9PiB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLnZhbHVlLmRvY3VtZW50LmVxdWFscyhlZGl0b3IudmFsdWUuZG9jdW1lbnQpKSB7XG4gICAgICB0aGlzLmhhbmRsZURvY3VtZW50Q2hhbmdlKGVkaXRvcik7XG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoeyB2YWx1ZTogZWRpdG9yLnZhbHVlIH0pO1xuICB9O1xuXG4gIHByb2Nlc3NSZWYgPSByZWYgPT4ge1xuICAgIHRoaXMuZWRpdG9yID0gcmVmO1xuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IG9uQWRkQXNzZXQsIGdldEFzc2V0LCBjbGFzc05hbWUsIGZpZWxkIH0gPSB0aGlzLnByb3BzO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIGNzcz17Y29yZUNzc2BcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIGB9XG4gICAgICA+XG4gICAgICAgIDxFZGl0b3JDb250cm9sQmFyPlxuICAgICAgICAgIDxUb29sYmFyXG4gICAgICAgICAgICBvbk1hcmtDbGljaz17dGhpcy5oYW5kbGVNYXJrQ2xpY2t9XG4gICAgICAgICAgICBvbkJsb2NrQ2xpY2s9e3RoaXMuaGFuZGxlQmxvY2tDbGlja31cbiAgICAgICAgICAgIG9uTGlua0NsaWNrPXt0aGlzLmhhbmRsZUxpbmtDbGlja31cbiAgICAgICAgICAgIG9uVG9nZ2xlTW9kZT17dGhpcy5oYW5kbGVUb2dnbGVNb2RlfVxuICAgICAgICAgICAgcGx1Z2lucz17dGhpcy5lZGl0b3JDb21wb25lbnRzfVxuICAgICAgICAgICAgb25TdWJtaXQ9e3RoaXMuaGFuZGxlSW5zZXJ0U2hvcnRjb2RlfVxuICAgICAgICAgICAgb25BZGRBc3NldD17b25BZGRBc3NldH1cbiAgICAgICAgICAgIGdldEFzc2V0PXtnZXRBc3NldH1cbiAgICAgICAgICAgIGJ1dHRvbnM9e2ZpZWxkLmdldCgnYnV0dG9ucycpfVxuICAgICAgICAgICAgaGFzTWFyaz17dGhpcy5oYXNNYXJrfVxuICAgICAgICAgICAgaGFzSW5saW5lPXt0aGlzLmhhc0lubGluZX1cbiAgICAgICAgICAgIGhhc0Jsb2NrPXt0aGlzLmhhc0Jsb2NrfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvRWRpdG9yQ29udHJvbEJhcj5cbiAgICAgICAgPENsYXNzTmFtZXM+XG4gICAgICAgICAgeyh7IGNzcywgY3ggfSkgPT4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2N4KFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICBjc3NgXG4gICAgICAgICAgICAgICAgICAke3Zpc3VhbEVkaXRvclN0eWxlc31cbiAgICAgICAgICAgICAgICBgLFxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8U2xhdGVcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Nzc2BcbiAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDE2cHggMjBweCAwO1xuICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudmFsdWV9XG4gICAgICAgICAgICAgICAgcmVuZGVyQmxvY2s9e3RoaXMucmVuZGVyQmxvY2t9XG4gICAgICAgICAgICAgICAgcmVuZGVySW5saW5lPXt0aGlzLnJlbmRlcklubGluZX1cbiAgICAgICAgICAgICAgICByZW5kZXJNYXJrPXt0aGlzLnJlbmRlck1hcmt9XG4gICAgICAgICAgICAgICAgc2NoZW1hPXt0aGlzLnNjaGVtYX1cbiAgICAgICAgICAgICAgICBwbHVnaW5zPXt0aGlzLnBsdWdpbnN9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgICAgIHJlZj17dGhpcy5wcm9jZXNzUmVmfVxuICAgICAgICAgICAgICAgIHNwZWxsQ2hlY2tcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEluc2VydGlvblBvaW50IG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2tCZWxvd0RvY3VtZW50fSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9DbGFzc05hbWVzPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuIl19 */",
  toString: _EMOTION_STRINGIFIED_CSS_ERROR__
};

class Editor extends _react.default.Component {
  constructor(props) {
    super(props);

    _defineProperty(this, "handleMarkClick", type => {
      this.editor.toggleMark(type).focus();
    });

    _defineProperty(this, "handleBlockClick", type => {
      this.editor.toggleBlock(type).focus();
    });

    _defineProperty(this, "handleLinkClick", () => {
      this.editor.toggleLink(() => window.prompt('Enter the URL of the link'));
    });

    _defineProperty(this, "hasMark", type => this.editor && this.editor.hasMark(type));

    _defineProperty(this, "hasInline", type => this.editor && this.editor.hasInline(type));

    _defineProperty(this, "hasBlock", type => this.editor && this.editor.hasBlock(type));

    _defineProperty(this, "handleToggleMode", () => {
      this.props.onMode('raw');
    });

    _defineProperty(this, "handleInsertShortcode", pluginConfig => {
      this.editor.insertShortcode(pluginConfig);
    });

    _defineProperty(this, "handleClickBelowDocument", () => {
      this.editor.moveToEndOfDocument();
    });

    _defineProperty(this, "handleDocumentChange", (0, _debounce2.default)(editor => {
      const {
        onChange
      } = this.props;
      const raw = editor.value.document.toJS();
      const markdown = (0, _serializers.slateToMarkdown)(raw, {
        voidCodeBlock: this.codeBlockComponent
      });
      onChange(markdown);
    }, 150));

    _defineProperty(this, "handleChange", editor => {
      if (!this.state.value.document.equals(editor.value.document)) {
        this.handleDocumentChange(editor);
      }

      this.setState({
        value: editor.value
      });
    });

    _defineProperty(this, "processRef", ref => {
      this.editor = ref;
    });

    const editorComponents = props.getEditorComponents();
    this.shortcodeComponents = editorComponents.filter((_ref3) => {
      let {
        type
      } = _ref3;
      return type === 'shortcode';
    });
    this.codeBlockComponent = (0, _immutable.fromJS)(editorComponents.find((_ref4) => {
      let {
        type
      } = _ref4;
      return type === 'code-block';
    }));
    this.editorComponents = this.codeBlockComponent || editorComponents.has('code-block') ? editorComponents : editorComponents.set('code-block', {
      label: 'Code Block',
      type: 'code-block'
    });
    this.renderBlock = (0, _renderers.renderBlock)({
      classNameWrapper: props.className,
      resolveWidget: props.resolveWidget,
      codeBlockComponent: this.codeBlockComponent
    });
    this.renderInline = (0, _renderers.renderInline)();
    this.renderMark = (0, _renderers.renderMark)();
    this.schema = (0, _schema.default)({
      voidCodeBlock: !!this.codeBlockComponent
    });
    this.plugins = (0, _visual.default)({
      getAsset: props.getAsset,
      resolveWidget: props.resolveWidget
    });
    this.state = {
      value: createSlateValue(this.props.value, {
        voidCodeBlock: !!this.codeBlockComponent
      })
    };
  }

  shouldComponentUpdate(nextProps, nextState) {
    return !this.state.value.equals(nextState.value);
  }

  componentDidMount() {
    if (this.props.pendingFocus) {
      this.editor.focus();
      this.props.pendingFocus();
    }
  }

  render() {
    const {
      onAddAsset,
      getAsset,
      className,
      field
    } = this.props;
    return (0, _core.jsx)("div", {
      css: _ref
    }, (0, _core.jsx)(_styles.EditorControlBar, null, (0, _core.jsx)(_Toolbar.default, {
      onMarkClick: this.handleMarkClick,
      onBlockClick: this.handleBlockClick,
      onLinkClick: this.handleLinkClick,
      onToggleMode: this.handleToggleMode,
      plugins: this.editorComponents,
      onSubmit: this.handleInsertShortcode,
      onAddAsset: onAddAsset,
      getAsset: getAsset,
      buttons: field.get('buttons'),
      hasMark: this.hasMark,
      hasInline: this.hasInline,
      hasBlock: this.hasBlock
    })), (0, _core.jsx)(_core.ClassNames, null, (_ref5) => {
      let {
        css,
        cx
      } = _ref5;
      return (0, _core.jsx)("div", {
        className: cx(className, css(_templateObject(), visualEditorStyles))
      }, (0, _core.jsx)(_slateReact.Editor, {
        className: css(_templateObject2()),
        value: this.state.value,
        renderBlock: this.renderBlock,
        renderInline: this.renderInline,
        renderMark: this.renderMark,
        schema: this.schema,
        plugins: this.plugins,
        onChange: this.handleChange,
        ref: this.processRef,
        spellCheck: true
      }), (0, _core.jsx)(InsertionPoint, {
        onClick: this.handleClickBelowDocument
      }));
    }));
  }

}

exports.default = Editor;

_defineProperty(Editor, "propTypes", {
  onAddAsset: _propTypes.default.func.isRequired,
  getAsset: _propTypes.default.func.isRequired,
  onChange: _propTypes.default.func.isRequired,
  onMode: _propTypes.default.func.isRequired,
  className: _propTypes.default.string.isRequired,
  value: _propTypes.default.string,
  field: _reactImmutableProptypes.default.map.isRequired,
  getEditorComponents: _propTypes.default.func.isRequired
});